cadastro_users As screen:
    LoadingSpinnerColor: =RGBA(0, 120, 212, 1)
    OnHidden: |-
        =UpdateContext({varShowCpfError: false});
        UpdateContext({varShowEmailError: false});
        UpdateContext({fromLoginValidEmail: Blank()});
    OnVisible: |+
        =UpdateContext({varShowCpfError: false});
        UpdateContext({varShowEmailError: false});
        UpdateContext({userHasBeenCreated: Blank()});
        //If(IsBlank(fromLoginValidEmail);
        //    UpdateContext({varEmailIsValid:true})
         //   ;
            UpdateContext({varEmailIsValid:false})
        //);;
        

    ButtonCreateUserWorker As button:
        BorderColor: =RGBA(0, 0, 0, 0)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        DisplayMode: =If(FormUsersCreate.Valid,DisplayMode.Edit,DisplayMode.Disabled)
        Fill: =RGBA(110, 164, 191, 1)
        FocusedBorderColor: =ColorFade(Self.Fill, -75%)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Semibold
        Height: =70
        HoverBorderColor: =RGBA(0, 0, 0, 0)
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 120, 212, 1), -10%)
        OnSelect: |
            =If(FormUsersCreate.Valid,SubmitForm(FormUsersCreate),Notify("Erro",NotificationType));
        PressedBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -50%)
        PressedColor: =RGBA(255, 255, 255, 1)
        PressedFill: =ColorFade(RGBA(2, 4, 48, 1), -30%)
        Size: =24
        Text: ="Criar perfil"
        Width: =480
        X: =80
        Y: =926
        ZIndex: =1

    FooterWorker_7 As FooterWorker:
        Fill: =
        Y: =Parent.Height-Self.Height
        ZIndex: =3

    HeaderWorker_2 As HeaderWorker:
        has_right_icon: =false
        header_title: ="Usuários - Informações Básicas"
        left_icon: =Icon.Home
        OnClickLeftIcon: |-
            =//ResetForm(FormUsersCreate);;ResetForm(FormUserDetails);;Reset(TxtInputLoginSenha);;
            If(IsBlank(userHasBeenCreated),
                Navigate(login,Fade,{userFromCadastroHasCreated:Blank()});
                ,
                Navigate(login,Fade,{userFromCadastroHasCreated:userHasBeenCreated});
            );
        OnClickRightIcon: |-
            =Navigate(_cadastro_users_details,ScreenTransition.Fade, {varShowCnpjError:false})
        Visible: =true
        ZIndex: =4

    lblOutPut As label:
        Align: =Align.Justify
        AutoHeight: =true
        BorderThickness: =2
        Color: =RGBA(51, 51, 51, 1)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        FocusedBorderThickness: =4
        Font: =Font.'Segoe UI'
        Height: =500
        Size: =21
        Text: |+
            =$"First dv calc {varFirstDVCalculated} 
            Second dv calc {Mod(Sum(ForAll(Sequence(10, 11, -1) As idx, Index(varSplitedTex, (12-idx.Value)).Result*(idx.Value)),Value)*10,11)}    
            validade do cpf = {varCpfIsValid}
            validade do email = {varEmailIsValid}
            Fomulário is valido = {formIsValid}
            validade do cnpj = {varCnpjIsValid}"
            
        Width: =500
        X: =Parent.Width
        Y: =650
        ZIndex: =6

    funcValidacaoForm As button:
        BorderColor: =RGBA(0, 0, 0, 0)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 120, 212, 1)
        FocusedBorderColor: =ColorFade(Self.Fill, -75%)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Bold
        Height: =70
        HoverBorderColor: =RGBA(0, 0, 0, 0)
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 120, 212, 1), -10%)
        OnSelect: |-
            =UpdateContext({formIsValid:false});
            If(And(FormUsersCreate.Valid=true,varCpfIsValid=true,varEmailIsValid=true,passwordIsEqual=true),UpdateContext({formIsValid:true}));
        PressedBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -50%)
        PressedColor: =RGBA(255, 255, 255, 1)
        PressedFill: =ColorFade(RGBA(0, 120, 212, 1), -30%)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =24
        Text: ="funcValidacaoForm"
        Width: =300
        X: =-400
        Y: =783
        ZIndex: =8

    contFormUsers As groupContainer.verticalAutoLayoutContainer:
        Height: =770
        LayoutAlignItems: =LayoutAlignItems.Center
        LayoutDirection: =LayoutDirection.Vertical
        LayoutJustifyContent: =LayoutJustifyContent.Center
        LayoutMode: =LayoutMode.Auto
        Width: =Parent.Width
        Y: =160
        ZIndex: =9

        FormUsersCreate As form:
            AlignInContainer: =AlignInContainer.SetByContainer
            BorderColor: =RGBA(255, 255, 255, 1)
            BorderStyle: =BorderStyle.None
            DataSource: =tbl_users
            DefaultMode: =FormMode.New
            Height: =638
            LayoutMinHeight: =250
            LayoutMinWidth: =320
            Width: =526
            X: =57
            Y: =165
            ZIndex: =1

            cnpj_DataCard1 As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="cnpj"
                Default: =ThisItem.cnpj
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"cnpj")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =DataCardValueCnpj.Height+ErrorMessageCnpj.Height+20
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "cnpj")
                Required: =false
                Update: =DataCardValue1cnpj.Text
                Width: =526
                X: =0
                Y: =5
                ZIndex: =1

                DataCardValue1cnpj As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Height: =55
                    HintText: ="CNPJ"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    OnChange: |
                        =UpdateContext({varCnpjIsValid:false});
                        UpdateContext({varShowCnpjError:true});
                        
                        If((Len(Self.Text)=14),
                            UpdateContext({varDig1:Int(Left(Self.Text,1))});
                            UpdateContext({varDig2:Int(Mid(Self.Text,2,1))});
                            UpdateContext({varDig3:Int(Mid(Self.Text,3,1))});
                            UpdateContext({varDig4:Int(Mid(Self.Text,4,1))});
                            UpdateContext({varDig5:Int(Mid(Self.Text,5,1))});
                            UpdateContext({varDig6:Int(Mid(Self.Text,6,1))});
                            UpdateContext({varDig7:Int(Mid(Self.Text,7,1))});
                            UpdateContext({varDig8:Int(Mid(Self.Text,8,1))});
                            UpdateContext({varDig9:Int(Mid(Self.Text,9,1))});
                            UpdateContext({varDig10:Int(Mid(Self.Text,10,1))});
                            UpdateContext({varDig11:Int(Mid(Self.Text,11,1))});
                            UpdateContext({varDig12:Int(Mid(Self.Text,12,1))});
                            UpdateContext({varFirstDV:Int(Mid(Self.Text,13,1))});
                            UpdateContext({varSecondDV:Int(Right(Self.Text,1))});
                            // Calculando o Primeiro Dígito Verificador
                        
                            UpdateContext(
                                {varSum1To12Dig: 
                                    (varDig1*5+varDig2*4+varDig3*3+varDig4*2+varDig5*9+varDig6*8+varDig7*7+varDig8*6+varDig9*5+varDig10*4+varDig11*3+varDig12*2)
                                }
                            );
                            UpdateContext({varFirstDVCalculated:Mod(varSum1To12Dig,11)});
                            If(varFirstDVCalculated<2,
                                UpdateContext({varFirstDVCalculated:0}),UpdateContext({varFirstDVCalculated:11-varFirstDVCalculated})
                            );
                            If(varFirstDV=varFirstDVCalculated,
                                // Calculando o Segundo Dígito Verificador
                                UpdateContext(
                                    {varSum1To13Dig: 
                                        (
                                            varDig1*6+varDig2*5+varDig3*4+varDig4*3+varDig5*2+varDig6*9+varDig7*8+
                                            varDig8*7+varDig9*6+varDig10*5+varDig11*4+varDig12*3 + varFirstDV*2
                                        )
                                    }
                                );
                                UpdateContext({varSecondDVCalculated:Mod(varSum1To13Dig,11)});
                                If(varSecondDVCalculated<2,
                                    UpdateContext({varSecondDVCalculated:0}),UpdateContext({varSecondDVCalculated:11-varSecondDVCalculated})
                                );
                                If(varSecondDV=varSecondDVCalculated,
                                    UpdateContext({varCnpjIsValid: true});)
                                    ;
                                ,
                                UpdateContext({varCnpjIsValid:false});
                            );
                        );
                        If(IsBlank(Self.Text), UpdateContext({varCnpjIsValid:true}));
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =Parent.Width/2-(Self.Width/2)
                    Y: =10
                    ZIndex: =2

                ErrorMessageCnpj As label:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(168, 0, 0, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(168, 0, 0, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =25
                    Live: =Live.Assertive
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =18
                    Text: |-
                        =If(Not(varCnpjIsValid),"CNPJ inválido.",
                            If(Not(varShowCnpjError),"")
                        )
                    Visible: =varShowCnpjError
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =DataCardValue1cnpj.Y + DataCardValue1cnpj.Height
                    ZIndex: =3

                StarVisible1 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    Y: =
                    ZIndex: =4

            occupation_DataCard2 As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="occupation"
                Default: =ThisItem.occupation
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"occupation")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =50
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "occupation")
                Required: =false
                Update: =DataCardValue2.Text
                Width: =526
                X: =0
                Y: =700
                ZIndex: =1

                DataCardValue2 As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Height: =55
                    HintText: ="Cargo/Ocupação"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =Parent.Width/2-(Self.Width/2)
                    Y: =Parent.Height/2-(Self.Height/2)
                    ZIndex: =2

                ErrorMessage4 As label:
                    AutoHeight: =true
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(168, 0, 0, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(168, 0, 0, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =10
                    Live: =Live.Assertive
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =21
                    Text: =Parent.Error
                    Visible: =Parent.DisplayMode=DisplayMode.Edit
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =DataCardValue2.Y + DataCardValue2.Height
                    ZIndex: =3

                StarVisible2 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    Y: =
                    ZIndex: =4

            name_DataCard6 As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="first_name"
                Default: =ThisItem.name
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"first_name")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =DataCardValueNome.Height+ErrorMessage25.Height+25
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "first_name")
                Required: =true
                Update: =Upper(Trim(DataCardValueNome.Text))
                Width: =526
                WidthFit: =false
                X: =0
                Y: =0
                ZIndex: =3

                DataCardValueNome As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Height: =50
                    HintText: ="Nome de usuário"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    OnChange: |-
                        =//UpdateContext({varUsername:Trim(Self.Text)});;
                        //Notify(varUsername;NotificationType.Information);;
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =Parent.Width/2-(Self.Width/2)
                    Y: =(Parent.Height/3)-Self.Height/2
                    ZIndex: =2

                ErrorMessage25 As label:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(168, 0, 0, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(168, 0, 0, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =30
                    Live: =Live.Assertive
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =18
                    Text: =If(IsBlank(DataCardValueNome),"Nome de usuário é requerido.")
                    Visible: =Parent.DisplayMode=DisplayMode.Edit
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =DataCardValueNome.Y + DataCardValueNome.Height
                    ZIndex: =3

                StarVisible30_1 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =DataCardValueEmail.Height
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    X: =DataCardValueNome.X - Self.Width
                    Y: =DataCardValueNome.Y
                    ZIndex: =5

            cpf_DataCard As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="cpf"
                Default: =ThisItem.cpf
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"cpf")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =DataCardValueCpf.Height+ErrorMessageCpf.Height+14
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "cpf")
                Required: =true
                Update: =Lower(Trim(DataCardValueCpf.Text))
                Width: =526
                X: =0
                Y: =1
                ZIndex: =3

                DataCardValueCpf As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Format: =TextFormat.Number
                    Height: =50
                    HintText: ="CPF"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    OnChange: |+
                        =
                        UpdateContext({varCpfIsValid:false});
                        UpdateContext({varShowCpfError: true});
                        
                        // Valida CPF
                        
                        If((Len(Self.Text)=11),
                            UpdateContext({varDig1:Int(Left(Self.Text,1))});UpdateContext({varDig2:Int(Mid(Self.Text,2,1))});UpdateContext({varDig3:Int(Mid(Self.Text,3,1))});UpdateContext({varDig4:Int(Mid(Self.Text,4,1))});UpdateContext({varDig5:Int(Mid(Self.Text,5,1))});
                            UpdateContext({varDig6:Int(Mid(Self.Text,6,1))});UpdateContext({varDig7:Int(Mid(Self.Text,7,1))});UpdateContext({varDig8:Int(Mid(Self.Text,8,1))});UpdateContext({varDig9:Int(Mid(Self.Text,9,1))}); UpdateContext({varFirstDV:Int(Mid(Self.Text,10,1))});
                            UpdateContext({varSecondDV:Int(Right(Self.Text,1))}); 
                            UpdateContext({varSum1To9Dig: (varDig1*10+varDig2*9+varDig3*8+varDig4*7+varDig5*6+varDig6*5+varDig7*4+varDig8*3+varDig9*2)});
                            UpdateContext({varFirstDVCalculated:Mod(varSum1To9Dig*10,11)});
                            If(varFirstDVCalculated=10, UpdateContext({varFirstDVCalculated:0}));
                            
                        
                            //Teste do primeiro digito verificador
                            If(varFirstDVCalculated=varFirstDV,
                                // TRUE
                                //UpdateContext({varSum1To10Dig: (varDig1+varDig2+varDig3+varDig4+varDig5+varDig6+varDig7+varDig8+varDig9+varFirstDV)});;
                                UpdateContext({varSplitedTex:Split(Mid(Self.Text, 1, 10),"")});
                                UpdateContext(
                                    {varSum1To10Dig:Sum(ForAll(Sequence(10, 11, -1) As idx, Index(varSplitedTex, (12-idx.Value)).Result*(idx.Value)),Value)}
                                );
                                UpdateContext({varSecondDVCalculated:Mod(varSum1To10Dig*10,11)});
                                If(varSecondDVCalculated=10,UpdateContext({varSecondDVCalculated: 0}));
                                If(varSecondDVCalculated=varSecondDV,
                                    If(CountRows(Distinct(Split(Self.Text,""),Result))<>1,
                                        // Verifica se todos os digitos são iguais
                                        UpdateContext({varCpfIsValid:true});
                                    );
                                );
                                
                            );
                            UpdateContext({userHasBeenCreated:LookUp(tbl_users, cpf=Self.Text,email)});
                        );
                        
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    VirtualKeyboardMode: =VirtualKeyboardMode.Numeric
                    Width: =Parent.Width - 60
                    X: =Parent.Width/2-(Self.Width/2)
                    Y: =Parent.Height/3-(Self.Height/2)
                    ZIndex: =2

                ErrorMessageCpf As label:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(168, 0, 0, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(168, 0, 0, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =30
                    Live: =Live.Assertive
                    OnSelect: |-
                        =If(Not(IsBlank(userHasBeenCreated)),Navigate(login,Fade,{userFromCadastroHasCreated:userHasBeenCreated}));
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =18
                    Text: |-
                        =If(varCpfIsValid,
                            (If(Not(IsBlank(userHasBeenCreated)),
                                "Usuário já cadastrado.")),
                            If(IsBlank(DataCardValueCpf),"O CPF é requerido.","CPF inválido.")
                        )
                    Visible: =varShowCpfError
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =DataCardValueCpf.Y + DataCardValueCpf.Height
                    ZIndex: =3

                StarVisible36 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =DataCardValueCpf.Height
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    Y: =DataCardValueCpf.Y
                    ZIndex: =4

            email_DataCard As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="email"
                Default: =ThisItem.email
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"email")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =DataCardValueEmail.Height+ErrorMessageEmailField.Height+10
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "email")
                Required: =true
                Update: =Lower(Trim(DataCardValueEmail.Text))
                Width: =526
                X: =0
                Y: =2
                ZIndex: =3

                DataCardValueEmail As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =If(IsBlank(fromLoginValidEmail),"",fromLoginValidEmail)
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Height: =55
                    HintText: ="Email"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    OnChange: |+
                        =// Valida Email
                        UpdateContext({varEmailIsValid:false});
                        UpdateContext({fromLoginValidEmail:Self.Text});
                        UpdateContext({varShowEmailError: true});
                        If(IsMatch(Self.Text,Email,MatchOptions.IgnoreCase),
                            UpdateContext({varEmailIsValid:true});//Notify("entrou in ismatch true");;
                        );
                        
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =Parent.Width/2-(Self.Width/2)
                    Y: =Parent.Height/3-(Self.Height/2)
                    ZIndex: =2

                ErrorMessageEmailField As label:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(168, 0, 0, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(168, 0, 0, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =30
                    Live: =Live.Assertive
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =18
                    Text: |-
                        =If(Len(DataCardValueEmail.Text)=0,"O Email é requerido.",
                            If(Not(IsBlank(fromLoginValidEmail)),
                                If(IsMatch(fromLoginValidEmail,Email,MatchOptions.IgnoreCase),""
                                ,
                                If(Not(varEmailIsValid),"Email inválido.","")
                                )
                            )
                        )
                    Visible: =varShowEmailError
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =DataCardValueEmail.Y + DataCardValueEmail.Height
                    ZIndex: =3

                StarVisible30 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =DataCardValueEmail.Height
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    Y: =DataCardValueEmail.Y
                    ZIndex: =4

            fone_DataCard As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="fone"
                Default: =ThisItem.fone
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"fone")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =DataCardValueFone.Height+14
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "fone")
                Required: =false
                Update: =Trim(DataCardValueFone.Text)
                Width: =526
                X: =0
                Y: =3
                ZIndex: =3

                DataCardValueFone As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Format: =TextFormat.Number
                    Height: =55
                    HintText: ="Telefone"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =Parent.Width/2-(Self.Width/2)   
                    Y: =Parent.Height/2-(Self.Height/2)
                    ZIndex: =2

            password_DataCard As typedDataCard.textualEditCard:
                BorderColor: =RGBA(166, 166, 166, 1)
                BorderStyle: =BorderStyle.Solid
                DataField: ="password"
                Default: =ThisItem.password
                DisplayMode: =Parent.DisplayMode
                DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"password")
                Fill: =RGBA(0, 0, 0, 0)
                Height: =206
                MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "password")
                Required: =true
                Update: =DataCardValuePassword.Text
                Width: =526
                X: =0
                Y: =4
                ZIndex: =3

                DataCardValuePassword As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Height: =55
                    HintText: ="Senha"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =Parent.Height/4-(Self.Height/2)
                    ZIndex: =2

                ErrorMessage32 As label:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(168, 0, 0, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(168, 0, 0, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =28
                    Live: =Live.Assertive
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =18
                    Text: |
                        =If(IsBlank(DataCardValuePassword),
                            "Defina uma senha."
                            ,
                            If(Not(passwordIsEqual),"A confirmação da senha não corresponde.")
                        )
                    Visible: =Parent.DisplayMode=DisplayMode.Edit
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =158
                    ZIndex: =3

                StarVisible32 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =DataCardValuePassword.Height
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    Y: =DataCardValuePassword.Y
                    ZIndex: =4

                DataCardValuePasswordConfirm As text:
                    BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                    BorderThickness: =2
                    Clear: =true
                    Color: =RGBA(51, 51, 51, 1)
                    Default: =Parent.Default
                    DelayOutput: =true
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: =Parent.DisplayMode
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    Height: =55
                    HintText: ="Confirme sua senha"
                    HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                    HoverColor: =RGBA(51, 51, 51, 1)
                    HoverFill: =RGBA(255, 255, 255, 1)
                    MaxLength: =Parent.MaxLength
                    OnChange: |-
                        =UpdateContext({passwordIsEqual: DataCardValuePassword.Text =DataCardValuePasswordConfirm.Text});
                    PaddingLeft: =5
                    PressedBorderColor: =RGBA(0, 120, 212, 1)
                    PressedColor: =RGBA(51, 51, 51, 1)
                    PressedFill: =RGBA(255, 255, 255, 1)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =21
                    Tooltip: =Parent.DisplayName
                    Width: =Parent.Width - 60
                    X: =30
                    Y: =92
                    ZIndex: =5

                StarVisible32_1 As label:
                    Align: =Align.Center
                    BorderColor: =RGBA(0, 0, 0, 0)
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =2
                    Color: =RGBA(51, 51, 51, 1)
                    DisabledBorderColor: =RGBA(0, 0, 0, 0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    FocusedBorderThickness: =4
                    Font: =Font.'Segoe UI'
                    FontWeight: =FontWeight.Semibold
                    Height: =DataCardValuePassword.Height
                    PaddingLeft: =0
                    Size: =21
                    Text: ="*"
                    Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                    Width: =30
                    Wrap: =false
                    Y: =DataCardValuePasswordConfirm.Y
                    ZIndex: =7


editar_cadastro_users As screen:
    LoadingSpinnerColor: =RGBA(0, 120, 212, 1)
    OnHidden: |
        =UpdateContext({ShowPassword:false});
        UpdateContext({ShowConfirmPassword:false});
        UpdateContext({varEmailIsValid:false});
        UpdateContext({varCpfIsValid:false});
        UpdateContext({passwordIsEqual:false});UpdateContext({ShowUndoIcon:false});
        
        UpdateContext({userInActivity:Blank()});
        UpdateContext({safeUserFormBackup:Blank()});
        UpdateContext({ShowUndoIcon:false});
    OnVisible: |-
        =Select(btnCheckUnsaved);
        UpdateContext({ShowPassword:false});
        UpdateContext({ShowConfirmPassword:false});
        UpdateContext({varEmailIsValid:true});
        UpdateContext({varCpfIsValid:true});
        UpdateContext({passwordIsEqual:true});
        UpdateContext({varCnpjIsValid:true});
        UpdateContext({varShowCnpjError:false});
        
        UpdateContext({userInActivity:LookUp(tbl_users,ID = CONST_CURRENT_USER.ID)});
        UpdateContext({safeUserFormBackup:userInActivity});
        //UpdateContext({ShowUndoIcon:(userInActivity.Modificado<>safeUserFormBackup.Modificado)});;
        UpdateContext({ShowUndoIcon:false});

    TitleEditAccount As label:
        BorderColor: =RGBA(0, 0, 0, 0)
        BorderStyle: =BorderStyle.None
        Color: =RGBA(110, 164, 191, 1)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        FocusedBorderThickness: =4
        FontWeight: =FontWeight.Bold
        Height: =38
        LineHeight: =1.171875
        PaddingBottom: =0
        PaddingLeft: =0
        PaddingRight: =0
        PaddingTop: =0
        Size: =24
        Text: ="Atualizar dados"
        VerticalAlign: =VerticalAlign.Top
        Width: =258
        X: =52
        Y: =137
        ZIndex: =1

    ButtonSave_6 As button:
        BorderColor: =RGBA(0, 0, 0, 0)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        DisplayMode: =If(varUnsaved, DisplayMode.Edit,DisplayMode.Disabled)
        Fill: =RGBA(110, 164, 191, 1)
        FocusedBorderColor: =ColorFade(Self.Fill, -75%)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Bold
        Height: =70
        HoverBorderColor: =RGBA(0, 0, 0, 0)
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 120, 212, 1), -10%)
        OnSelect: |
            =/*
            If(
                FormUsersUpdate.Mode=FormMode.View;
                EditForm(FormUsersUpdate);
                ViewForm(FormUsersUpdate)
            );;*/
            
            If(FormUsersUpdate.Mode=FormMode.Edit And varUnsaved,
                //UpdateContext({userInActivity:LookUp(tbl_users;ID = CONST_CURRENT_USER.ID)});;// Guarda o registro antes de ser modificado
                //UpdateContext({safeUserFormBackup:userInActivity});;
                //UpdateContext({last:SubmitForm(FormUsersUpdate)});; 
                SubmitForm(FormUsersUpdate);
                
                Select(btnCheckUnsaved);
                NewForm(FormUsersUpdate);EditForm(FormUsersUpdate);
                Back();
            );
                // If(FormUsersCreate_2.Unsaved=false; UpdateContext({ShowUndoIcon:false}));;
                
        PressedBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -50%)
        PressedColor: =RGBA(255, 255, 255, 1)
        PressedFill: =ColorFade(RGBA(0, 120, 212, 1), -30%)
        Size: =21
        Text: |-
            =Switch(
                FormUsersUpdate.Mode,
                FormMode.View,
                "Editar",
                FormMode.Edit,
                If(
                    varUnsaved,
                    "Salvar",
                    "Visualizar"
                )
            )
        X: =425
        Y: =915
        ZIndex: =2

    FooterWorker_12 As FooterWorker:
        Y: =1036
        ZIndex: =3

    HeaderWorker_28 As HeaderWorker:
        background_color: =If(IsBlank(CONST_CURRENT_USER.cnpj),RGBA(110, 164, 191, 1), RGBA(2,4,48,1))
        header_title: =CONST_CURRENT_USER.name
        left_icon: =Icon.Home
        OnClickLeftIcon: =Navigate(user_home,ScreenTransition.Fade);
        OnClickRightIcon: |-
            =Set(CONST_CURRENT_USER, Blank());
            Navigate(login,ScreenTransition.Fade);
        Visible: =true
        ZIndex: =4

    FormUsersUpdate As form:
        BorderColor: =RGBA(255, 255, 255, 1)
        BorderStyle: =BorderStyle.None
        DataSource: =tbl_users
        Height: =740
        Item: =userInActivity
        OnSuccess: |-
            =UpdateContext({userInActivity:FormUsersUpdate.LastSubmit});
            Notify("Usuário atualizado.",NotificationType.Success);
        Width: =640
        Y: =175
        ZIndex: =6

        occupation_DataCard3_1 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="occupation"
            Default: =ThisItem.occupation
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"occupation")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "occupation")
            Required: =false
            Update: =DataCardValueOccupation.Text
            Width: =640
            X: =0
            Y: =5
            ZIndex: =1

            DataCardKey2_2 As label:
                AutoHeight: =true
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =48
                PaddingLeft: =0
                Size: =21
                Text: =
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                ZIndex: =1

            DataCardValueOccupation As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =50
                HintText: ="Cargo"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                OnChange: =Select(btnCheckUnsaved);
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="Cargo"
                Width: =525
                X: =57
                Y: =Parent.Height/2-(Self.Height/2)
                ZIndex: =2

        active_DataCard1 As typedDataCard.toggleEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="active"
            Default: =ThisItem.active
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"active")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =49
            Required: =false
            Update: =DataCardValue1.Value
            Width: =Parent.Width
            X: =0
            Y: =6
            ZIndex: =1

            DataCardValue1 As toggleSwitch:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderStyle: =BorderStyle.None
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisplayMode: =Parent.DisplayMode
                FalseFill: =RGBA(102, 102, 102, 1)
                FalseHoverFill: =RGBA(33, 33, 33, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                HandleFill: =RGBA(255, 255, 255, 1)
                Height: =36
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                OnChange: =Select(btnCheckUnsaved);
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                Size: =21
                Tooltip: =Parent.DisplayName
                TrueFill: =RGBA(0, 120, 212, 1)
                TrueHoverFill: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                TrueText: ="Ativado"
                Width: =240
                X: =338
                Y: =8
                ZIndex: =2

            StarVisible3 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =21
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =
                ZIndex: =4

        cnpj_DataCard2 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="cnpj"
            Default: =ThisItem.cnpj
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"cnpj")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "cnpj")
            Required: =false
            Update: =DataCardValue3.Text
            Width: =640
            X: =0
            Y: =7
            ZIndex: =1

            DataCardKey1 As label:
                AutoHeight: =true
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =48
                PaddingLeft: =0
                Size: =21
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue3 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =70
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: =Parent.DisplayName
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey1.Y + DataCardKey1.Height + 5
                ZIndex: =2

            ErrorMessage1 As label:
                AutoHeight: =true
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(168, 0, 0, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(168, 0, 0, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =21
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue3.Y + DataCardValue3.Height
                ZIndex: =3

            StarVisible4 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =DataCardKey1.Height
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey1.Y
                ZIndex: =4

        name_DataCard6_2 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="first_name"
            Default: =ThisItem.name
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"first_name")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =DataCardValueNome_2.Height+ErrorMessage25_2.Height+18
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "first_name")
            Required: =true
            Update: =Upper(Trim(DataCardValueNome_2.Text))
            Width: =640
            WidthFit: =false
            X: =0
            Y: =0
            ZIndex: =3

            DataCardValueNome_2 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =50
                HintText: ="Nome de usuário"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                OnChange: =Select(btnCheckUnsaved);
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="Nome de usuário"
                Width: =525
                X: =Parent.Width/2-(Self.Width/2)
                Y: =(Parent.Height/3)-Self.Height/3
                ZIndex: =2

            ErrorMessage25_2 As label:
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(168, 0, 0, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(168, 0, 0, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =30
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =If(IsBlank(DataCardValueNome_2),"Nome de usuário é requerido.")
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValueNome_2.Y + DataCardValueNome_2.Height
                ZIndex: =3

            StarVisible30_5 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =DataCardValueEmail_2.Height
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                X: =DataCardValueNome_2.X - Self.Width
                Y: =DataCardValueNome_2.Y
                ZIndex: =5

        cpf_DataCard_2 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="cpf"
            Default: =ThisItem.cpf
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"cpf")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =100 
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "cpf")
            Required: =true
            Update: =Trim(DataCardValueCpf_2.Text)
            Width: =640
            X: =0
            Y: =1
            ZIndex: =3

            DataCardValueCpf_2 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Format: =TextFormat.Number
                Height: =50
                HintText: ="CPF"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                OnChange: |+
                    =Select(btnCheckUnsaved);
                    UpdateContext({varCpfIsValid:false});
                    UpdateContext({varShowCpfError: true});
                    
                    // Valida CPF
                    
                    If((Len(Self.Text)=11),
                        UpdateContext({varDig1:Int(Left(Self.Text,1))});UpdateContext({varDig2:Int(Mid(Self.Text,2,1))});UpdateContext({varDig3:Int(Mid(Self.Text,3,1))});UpdateContext({varDig4:Int(Mid(Self.Text,4,1))});UpdateContext({varDig5:Int(Mid(Self.Text,5,1))});
                        UpdateContext({varDig6:Int(Mid(Self.Text,6,1))});UpdateContext({varDig7:Int(Mid(Self.Text,7,1))});UpdateContext({varDig8:Int(Mid(Self.Text,8,1))});UpdateContext({varDig9:Int(Mid(Self.Text,9,1))}); UpdateContext({varFirstDV:Int(Mid(Self.Text,10,1))});
                        UpdateContext({varSecondDV:Int(Right(Self.Text,1))}); 
                        UpdateContext({varSum1To9Dig: (varDig1*10+varDig2*9+varDig3*8+varDig4*7+varDig5*6+varDig6*5+varDig7*4+varDig8*3+varDig9*2)});
                        UpdateContext({varFirstDVCalculated:Mod(varSum1To9Dig*10,11)});
                        If(varFirstDVCalculated=10, UpdateContext({varFirstDVCalculated:0}));
                        
                    
                        //Teste do primeiro digito verificador
                        If(varFirstDVCalculated=varFirstDV,
                            // TRUE
                            //UpdateContext({varSum1To10Dig: (varDig1+varDig2+varDig3+varDig4+varDig5+varDig6+varDig7+varDig8+varDig9+varFirstDV)});;
                            UpdateContext({varSplitedTex:Split(Mid(Self.Text, 1, 10),"")});
                            UpdateContext(
                                {varSum1To10Dig:Sum(ForAll(Sequence(10, 11, -1) As idx, Index(varSplitedTex, (12-idx.Value)).Result*(idx.Value)),Value)}
                            );
                            UpdateContext({varSecondDVCalculated:Mod(varSum1To10Dig*10,11)});
                            If(varSecondDVCalculated=10,UpdateContext({varSecondDVCalculated: 0}));
                            If(varSecondDVCalculated=varSecondDV,
                                If(CountRows(Distinct(Split(Self.Text,""),Result))<>1,
                                    // Verifica se todos os digitos são iguais
                                    UpdateContext({varCpfIsValid:true});
                                );
                            );
                            
                        );
                        UpdateContext({userHasBeenCreated:LookUp(tbl_users, cpf=Self.Text,email)});
                    );
                    
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="CPF"//Parent.DisplayName
                VirtualKeyboardMode: =VirtualKeyboardMode.Numeric
                Width: =526
                X: =Parent.Width/2-(Self.Width/2)
                Y: =Parent.Height/3-(Self.Height/2)
                ZIndex: =2

            ErrorMessageCpf_2 As label:
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(168, 0, 0, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(168, 0, 0, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =30
                Live: =Live.Assertive
                OnSelect: |-
                    =If(Not(IsBlank(userHasBeenCreated)),Navigate(login,Fade,{userFromCadastroHasCreated:userHasBeenCreated}));
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: |-
                    =If(IsBlank(DataCardValueCpf_2),"O CPF é requerido.",
                        If(varCpfIsValid,Blank(),"CPF inválido."
                        )
                    )
                Visible: =varShowCpfError
                Width: =525
                X: =58
                Y: =DataCardValueCpf_2.Y + DataCardValueCpf_2.Height
                ZIndex: =3

            StarVisible36_2 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =DataCardValueCpf_2.Height
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                X: =DataCardValueCpf_2.X - Self.Width
                Y: =DataCardValueCpf_2.Y
                ZIndex: =4

        email_DataCard_2 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="email"
            Default: =ThisItem.email
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"email")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =95
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "email")
            Required: =true
            Update: =Lower(Trim(DataCardValueEmail_2.Text))
            Width: =640
            X: =0
            Y: =2
            ZIndex: =3

            DataCardValueEmail_2 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =50
                HintText: ="Email"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                OnChange: |+
                    =Select(btnCheckUnsaved);
                    // Valida Email
                    UpdateContext({varEmailIsValid:false});
                    UpdateContext({fromLoginValidEmail:Self.Text});
                    UpdateContext({varShowEmailError: true});
                    If(IsMatch(Self.Text,Email,MatchOptions.IgnoreCase),
                        UpdateContext({varEmailIsValid:true});//Notify("entrou in ismatch true");;
                    );
                    
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="Email"
                Width: =526 
                X: =Parent.Width/2-(Self.Width/2)
                Y: =Parent.Height/3-(Self.Height/2)
                ZIndex: =2

            ErrorMessageEmailField_2 As label:
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(168, 0, 0, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(168, 0, 0, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =30
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: |
                    =If(IsBlank(DataCardValueEmail_2),"O Email é requerido.",
                        If(IsMatch(fromLoginValidEmail,Email,MatchOptions.IgnoreCase),
                            Blank()
                            ,
                            If(varEmailIsValid,
                                Blank()
                                ,
                                "Email inválido.")
                            )
                        )
                Visible: =varShowEmailError
                Width: =525
                X: =58
                Y: =DataCardValueEmail_2.Y + DataCardValueEmail_2.Height
                ZIndex: =3

            StarVisible30_6 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =DataCardValueEmail_2.Height
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                X: =DataCardValueEmail_2.X - Self.Width
                Y: =DataCardValueEmail_2.Y
                ZIndex: =4

        fone_DataCard_2 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="fone"
            Default: =ThisItem.fone
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"fone")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =57
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "fone")
            Required: =false
            Update: =Trim(DataCardValueFone_2.Text)
            Width: =640
            X: =0
            Y: =3
            ZIndex: =3

            DataCardValueFone_2 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Format: =TextFormat.Number
                Height: =50
                HintText: ="Telefone"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                OnChange: =Select(btnCheckUnsaved)
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="Telefone"
                Width: =526
                X: =Parent.Width/2-(Self.Width/2)   
                Y: =Parent.Height/2-(Self.Height/2)
                ZIndex: =2

        password_DataCard_2 As typedDataCard.textualEditCard:
            BorderColor: =RGBA(166, 166, 166, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="password"
            Default: =ThisItem.password
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@tbl_users],DataSourceInfo.DisplayName,"password")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =159
            MaxLength: =DataSourceInfo([@tbl_users], DataSourceInfo.MaxLength, "password")
            Required: =true
            Update: =DataCardValuePassword_2.Text
            Visible: =FormUsersUpdate.Mode<>FormMode.View
            Width: =640
            X: =0
            Y: =4
            ZIndex: =3

            DataCardValuePassword_2 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =50
                HintText: ="Senha"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                Mode: |-
                    =If(ShowPassword,
                        TextMode.SingleLine,
                        TextMode.Password
                        )
                OnChange: =Select(btnCheckUnsaved);
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="Senha"
                Width: =526
                X: =Parent.Width/2-(Self.Width/2)
                Y: =Parent.Height/4-(Self.Height/2)
                ZIndex: =2

            ErrorMessage32_2 As label:
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(168, 0, 0, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(168, 0, 0, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =28
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: |
                    =If(IsBlank(DataCardValuePassword_2),
                        "Defina uma senha."
                        ,
                        If(Not(passwordIsEqual),"A confirmação da senha não corresponde.")
                    )
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =525
                X: =58
                Y: =131
                ZIndex: =3

            StarVisible32_4 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =DataCardValuePassword_2.Height
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                X: =DataCardValuePassword_2.X - Self.Width
                Y: =DataCardValuePassword_2.Y
                ZIndex: =4

            DataCardValuePasswordConfirm_2 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =50
                HintText: ="Confirme sua senha"
                HoverBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverColor: =RGBA(51, 51, 51, 1)
                HoverFill: =RGBA(255, 255, 255, 1)
                MaxLength: =Parent.MaxLength
                Mode: |-
                    =If(ShowConfirmPassword,
                        TextMode.SingleLine,
                        TextMode.Password
                        )
                OnChange: |-
                    =Select(btnCheckUnsaved);
                    UpdateContext({passwordIsEqual: DataCardValuePassword_2.Text =DataCardValuePasswordConfirm_2.Text});
                PaddingLeft: =5
                PressedBorderColor: =RGBA(0, 120, 212, 1)
                PressedColor: =RGBA(51, 51, 51, 1)
                PressedFill: =RGBA(255, 255, 255, 1)
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =21
                Tooltip: ="Confirme sua senha"
                Width: =525
                X: =58
                Y: =76
                ZIndex: =5

            StarVisible32_5 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                FontWeight: =FontWeight.Semibold
                Height: =DataCardValuePassword_2.Height
                PaddingLeft: =0
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                X: =DataCardValuePasswordConfirm_2.X - Self.Width
                Y: =76
                ZIndex: =7

            iconShowPassword_1 As icon.View:
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(0, 120, 212, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =45
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.View
                OnSelect: |-
                    =UpdateContext({ShowPassword:!ShowPassword})
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Width: =25
                X: =550
                Y: =25
                ZIndex: =8

            iconShowPasswordConfirm_1 As icon.View:
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(0, 120, 212, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =45
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.View
                OnSelect: |-
                    =UpdateContext({ShowConfirmPassword:!ShowConfirmPassword})
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Width: =25
                X: =550
                Y: =81
                ZIndex: =9

    btnCheckUnsaved As button:
        BorderColor: =RGBA(0, 0, 0, 0)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(110,164,191, 1)
        FocusedBorderColor: =ColorFade(Self.Fill, -75%)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Bold
        Height: =175
        HoverBorderColor: =RGBA(0, 0, 0, 0)
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 120, 212, 1), -10%)
        OnSelect: |-
            =UpdateContext({varUnsaved: 
                    !(
                    Trim(Upper(DataCardValueNome_2.Text)) = Trim(Upper(name_DataCard6_2.Default))
                    And Trim(Upper(DataCardValueCpf_2.Text)) = Trim(Upper(cpf_DataCard_2.Default))
                    And Trim(Upper(DataCardValueEmail_2.Text)) = Trim(Upper(email_DataCard_2.Default))
                    And Trim(Upper(DataCardValueFone_2.Text)) = Trim(Upper(fone_DataCard_2.Default))
                    And Trim(Upper(password_DataCard_2.Default)) = Trim(Upper(DataCardValuePassword_2.Text))
                    And Value(DataCardValue3.Text) = Value(cnpj_DataCard2.Default)
                    And Trim(Upper(occupation_DataCard3_1.Default)) = Trim(Upper(DataCardValueOccupation.Text))
                    And active_DataCard1.Default = DataCardValue1.Value
                    )
                }
            )
        PressedBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -50%)
        PressedColor: =RGBA(255, 255, 255, 1)
        PressedFill: =ColorFade(RGBA(0, 120, 212, 1), -30%)
        Size: =24
        Text: ="checa se todas valores estão iguais na base e no form"
        Width: =232
        X: =-500
        Y: =961
        ZIndex: =8

    btnBackUpBeforeUpdate_1 As button:
        BorderColor: =RGBA(0, 0, 0, 0)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 120, 212, 1)
        FocusedBorderColor: =ColorFade(Self.Fill, -75%)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Semibold
        Height: =150
        HoverBorderColor: =RGBA(0, 0, 0, 0)
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 120, 212, 1), -10%)
        OnSelect: |-
            =//ClearCollect(colSafeFormData; FormActivity_2.Updates);;
            //UpdateContext({safeFormBackup: itemActivity});;
        PressedBorderColor: =ColorFade(RGBA(0, 120, 212, 1), -50%)
        PressedColor: =RGBA(255, 255, 255, 1)
        PressedFill: =ColorFade(RGBA(0, 120, 212, 1), -30%)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =24
        Text: ="guarda registro atual"
        Width: =188
        X: =-500
        Y: =791
        ZIndex: =9

    IconUndo_1 As icon.Undo:
        BorderColor: =RGBA(166, 166, 166, 1)
        Color: =RGBA(0, 120, 212, 1)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(220, 220, 220, 1)
        DisabledFill: =RGBA(0, 0, 0, 0)
        FocusedBorderThickness: =4
        HoverBorderColor: =RGBA(0, 0, 0, 0)
        HoverColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
        HoverFill: =RGBA(0, 0, 0, 0)
        Icon: =Icon.Undo
        OnSelect: |+
            =
            
            If(FormUsersUpdate.Mode=FormMode.Edit,
                UpdateContext({itemActivity:safeFormBackup}); // Monta o registro de backup no formulário atual
                SubmitForm(FormUsersUpdate);
                UpdateContext({itemActivity:FormUsersUpdate.LastSubmit});
                UpdateContext({safeFormBackup: itemActivity});
                
                ResetForm(FormUsersUpdate);
                UpdateContext({ShowUndoIcon:false});
            )
            
        PressedBorderColor: =RGBA(0, 0, 0, 0)
        PressedColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
        PressedFill: =RGBA(0, 0, 0, 0)
        Tooltip: ="Desfazer"
        Visible: |-
            =If(IsBlank(safeFormBackup),
                false
                ,
                ShowUndoIcon
            )
            
            
                
        X: =122
        Y: =900
        ZIndex: =10

    Label10 As label:
        BorderColor: =RGBA(0, 0, 0, 0)
        BorderStyle: =BorderStyle.None
        BorderThickness: =2
        Color: =RGBA(51, 51, 51, 1)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        FocusedBorderThickness: =4
        Font: =Font.'Segoe UI'
        Height: =111
        Size: =21
        Text: |-
            =FormUsersUpdate.Valid
            & $"{FormUsersUpdate.LastSubmit.cnpj}
            {FormUsersUpdate.LastSubmit.name}"
            
            /*
            DataCardValueNome_2.Text = name_DataCard6_2.Default  And
              DataCardValueCpf_2.Text = cpf_DataCard_2.Default  And
              DataCardValueEmail_2.Text = email_DataCard_2.Default And
              DataCardValueFone_2.Text=  fone_DataCard_2.Default  And    
                password_DataCard_2.Default = DataCardValuePassword_2.Text And 
                cnpj_DataCard3_1.Default = DataCardValue1cnpj_1.Text And 
                occupation_DataCard3_1.Default =DataCardValueOccupation.Text And
                active_DataCard1.Default = DataCardValue1.Value*/
        Width: =356
        X: =-550
        Y: =450
        ZIndex: =11

